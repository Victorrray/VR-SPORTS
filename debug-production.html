<!DOCTYPE html>
<html>
<head>
    <title>VR-Odds Production Debug</title>
</head>
<body>
    <h1>Production API Debug Test</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        async function testAPI() {
            const tests = [
                {
                    name: 'Health Check',
                    url: 'https://vr-sports.onrender.com/api/health'
                },
                {
                    name: 'Scores API',
                    url: 'https://vr-sports.onrender.com/api/scores?sport=americanfootball_nfl'
                },
                {
                    name: 'Odds API',
                    url: 'https://vr-sports.onrender.com/api/odds?sports=americanfootball_nfl&markets=h2h'
                }
            ];
            
            for (const test of tests) {
                try {
                    results.innerHTML += `<h3>Testing ${test.name}...</h3>`;
                    
                    // Test with different fetch configurations
                    const configs = [
                        { name: 'Default fetch', options: {} },
                        { name: 'No credentials', options: { credentials: 'omit' } },
                        { name: 'Include credentials', options: { credentials: 'include' } },
                        { name: 'CORS mode', options: { mode: 'cors', credentials: 'omit' } }
                    ];
                    
                    for (const config of configs) {
                        try {
                            const response = await fetch(test.url, config.options);
                            const data = await response.json();
                            results.innerHTML += `<p>✅ ${config.name}: SUCCESS (${response.status})</p>`;
                            if (test.name === 'Health Check') {
                                results.innerHTML += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                            }
                        } catch (error) {
                            results.innerHTML += `<p>❌ ${config.name}: ${error.message}</p>`;
                        }
                    }
                    
                } catch (error) {
                    results.innerHTML += `<p>❌ ${test.name} failed: ${error.message}</p>`;
                }
            }
        }
        
        // Run tests when page loads
        testAPI();
    </script>
</body>
</html>
